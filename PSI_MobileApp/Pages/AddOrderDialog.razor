@using ClassLibrary
<MudDialog Style="max-height:500px; overflow-y: scroll">
    <DialogContent>
        <MudContainer>
            <MudTextField T="string" Label="Dish name" Margin="Margin.Normal" @bind-Value="MealName" Required="true" RequiredError="Please enter name."/>
            <MudTextField T="double" Label="Price" Margin="Margin.Normal" @bind-Value="Price" Required="true" RequiredError="Please enter name."/>
            <MudTimePicker Label="Pickup time" PickerVariant="PickerVariant.Static" @bind-Time="TimeSpan"/>
            <MudDatePicker Label="Pickup date" PickerVariant="PickerVariant.Static" @bind-Date="PickUpDate" DateFormat="YYYY-MM-DD" MinDate="DateTime.Now.AddDays(-1)" Required="true" RequiredError="Plese choose a date."/>
        </MudContainer>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">Cancel</MudButton>
        <MudButton OnClick="Submit">Ok</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] MudDialogInstance MudDialog { get; set; }
    [Parameter] public string MealName { get; set; }
    [Parameter] public double Price { get; set; }
    public DateTime? PickUpDate { get; set; }
    public TimeSpan? TimeSpan { get; set; }

    void Submit()
    {
        Advertisement adv = new Advertisement()
            {
                MealName = MealName,
                Buyer = null,
                Tags = "[]",
                PickupTimeSpan = (DateTime)(DateTime.UtcNow + TimeSpan),
                TimeOfMaking = DateTime.UtcNow,
                Cost = Price
    };
        MudDialog.Close(DialogResult.Ok<Advertisement>(adv));
    }
    void Cancel() => MudDialog.Cancel();
    
}
